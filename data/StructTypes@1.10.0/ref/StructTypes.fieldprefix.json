{"attributes":{"kind":"function","backlinks":[],"methods":[{"symbol_id":"StructTypes.fieldprefix","module_id":"StructTypes","file":"StructTypes.jl","line":305,"signature":"(::Signature)"}],"package_id":"StructTypes@1.10.0","title":"fieldprefix","symbol_id":"StructTypes.fieldprefix","exported":false,"module_id":"StructTypes"},"tag":"documentation","children":[{"attributes":{"symbol":"StructTypes.fieldprefix","line":254,"module":"StructTypes","file":"StructTypes.jl"},"tag":"docstring","children":[{"attributes":{},"tag":"md","children":[{"attributes":{"lang":""},"tag":"codeblock","children":["StructTypes.fieldprefix(::Type{MyType}, field::Symbol) = :field_\n"],"type":"node"},{"attributes":{},"tag":"p","children":["When interacting with database tables and other strictly 2D data formats, objects with aggregate fields must be flattened into a single set of column names. When deserializing a set of columns into an object with aggregate fields, a field type's ",{"attributes":{},"tag":"code","children":["fieldprefix"],"type":"node"}," signals that column names beginning with, in the example above, ",{"attributes":{},"tag":"code","children":[":field_"],"type":"node"},", should be collected together when constructing the ",{"attributes":{},"tag":"code","children":["field"],"type":"node"}," field of ",{"attributes":{},"tag":"code","children":["MyType"],"type":"node"},". Note the default definition is ",{"attributes":{},"tag":"code","children":["StructTypes.fieldprefix(T, nm) = Symbol(nm, :_)"],"type":"node"},"."],"type":"node"},{"attributes":{},"tag":"p","children":["Here's a more concrete, albeit contrived, example:"],"type":"node"},{"attributes":{"lang":"julia"},"tag":"codeblock","children":[{"attributes":{},"tag":"julia","children":[{"attributes":{},"tag":"struct","children":[{"attributes":{},"tag":"false","children":[""],"type":"node"},{"attributes":{},"tag":"struct","children":["struct"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"Identifier","children":["Spouse"],"type":"node"},{"attributes":{},"tag":"block","children":[{"attributes":{},"tag":"NewlineWs","children":["\n    "],"type":"node"},{"attributes":{},"tag":"::","children":[{"attributes":{},"tag":"Identifier","children":["id"],"type":"node"},{"attributes":{},"tag":"::","children":["::"],"type":"node"},{"attributes":{},"tag":"Identifier","children":["Int"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n    "],"type":"node"},{"attributes":{},"tag":"::","children":[{"attributes":{},"tag":"Identifier","children":["name"],"type":"node"},{"attributes":{},"tag":"::","children":["::"],"type":"node"},{"attributes":{},"tag":"Identifier","children":["String"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"end","children":["end"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n"],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n"],"type":"node"},{"attributes":{},"tag":"=","children":[{"attributes":{},"tag":"call","children":[{"attributes":{},"tag":".","children":[{"attributes":{"reftype":"symbol","document_id":"StructTypes@1.10.0/ref/StructTypes"},"tag":"reference","children":["StructTypes"],"type":"node"},{"attributes":{},"tag":".","children":["."],"type":"node"},{"attributes":{},"tag":"quote","children":[{"attributes":{"reftype":"symbol","document_id":"StructTypes@1.10.0/ref/StructTypes.StructType"},"tag":"reference","children":["StructType"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"(","children":["("],"type":"node"},{"attributes":{},"tag":"::","children":[{"attributes":{},"tag":"::","children":["::"],"type":"node"},{"attributes":{},"tag":"curly","children":[{"attributes":{},"tag":"Identifier","children":["Type"],"type":"node"},{"attributes":{},"tag":"{","children":["{"],"type":"node"},{"attributes":{},"tag":"Identifier","children":["Spouse"],"type":"node"},{"attributes":{},"tag":"}","children":["}"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":")","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"=","children":["="],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"call","children":[{"attributes":{},"tag":".","children":[{"attributes":{"reftype":"symbol","document_id":"StructTypes@1.10.0/ref/StructTypes"},"tag":"reference","children":["StructTypes"],"type":"node"},{"attributes":{},"tag":".","children":["."],"type":"node"},{"attributes":{},"tag":"quote","children":[{"attributes":{"reftype":"symbol","document_id":"StructTypes@1.10.0/ref/StructTypes.Struct"},"tag":"reference","children":["Struct"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"(","children":["("],"type":"node"},{"attributes":{},"tag":")","children":[")"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n"],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n"],"type":"node"},{"attributes":{},"tag":"struct","children":[{"attributes":{},"tag":"false","children":[""],"type":"node"},{"attributes":{},"tag":"struct","children":["struct"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"Identifier","children":["Person"],"type":"node"},{"attributes":{},"tag":"block","children":[{"attributes":{},"tag":"NewlineWs","children":["\n    "],"type":"node"},{"attributes":{},"tag":"::","children":[{"attributes":{},"tag":"Identifier","children":["id"],"type":"node"},{"attributes":{},"tag":"::","children":["::"],"type":"node"},{"attributes":{},"tag":"Identifier","children":["Int"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n    "],"type":"node"},{"attributes":{},"tag":"::","children":[{"attributes":{},"tag":"Identifier","children":["name"],"type":"node"},{"attributes":{},"tag":"::","children":["::"],"type":"node"},{"attributes":{},"tag":"Identifier","children":["String"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n    "],"type":"node"},{"attributes":{},"tag":"::","children":[{"attributes":{},"tag":"Identifier","children":["spouse"],"type":"node"},{"attributes":{},"tag":"::","children":["::"],"type":"node"},{"attributes":{},"tag":"Identifier","children":["Spouse"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"end","children":["end"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n"],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n"],"type":"node"},{"attributes":{},"tag":"=","children":[{"attributes":{},"tag":"call","children":[{"attributes":{},"tag":".","children":[{"attributes":{"reftype":"symbol","document_id":"StructTypes@1.10.0/ref/StructTypes"},"tag":"reference","children":["StructTypes"],"type":"node"},{"attributes":{},"tag":".","children":["."],"type":"node"},{"attributes":{},"tag":"quote","children":[{"attributes":{"reftype":"symbol","document_id":"StructTypes@1.10.0/ref/StructTypes.StructType"},"tag":"reference","children":["StructType"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"(","children":["("],"type":"node"},{"attributes":{},"tag":"::","children":[{"attributes":{},"tag":"::","children":["::"],"type":"node"},{"attributes":{},"tag":"curly","children":[{"attributes":{},"tag":"Identifier","children":["Type"],"type":"node"},{"attributes":{},"tag":"{","children":["{"],"type":"node"},{"attributes":{},"tag":"Identifier","children":["Person"],"type":"node"},{"attributes":{},"tag":"}","children":["}"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":")","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"=","children":["="],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"call","children":[{"attributes":{},"tag":".","children":[{"attributes":{"reftype":"symbol","document_id":"StructTypes@1.10.0/ref/StructTypes"},"tag":"reference","children":["StructTypes"],"type":"node"},{"attributes":{},"tag":".","children":["."],"type":"node"},{"attributes":{},"tag":"quote","children":[{"attributes":{"reftype":"symbol","document_id":"StructTypes@1.10.0/ref/StructTypes.Struct"},"tag":"reference","children":["Struct"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"(","children":["("],"type":"node"},{"attributes":{},"tag":")","children":[")"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n"],"type":"node"},{"attributes":{},"tag":"=","children":[{"attributes":{},"tag":"call","children":[{"attributes":{},"tag":".","children":[{"attributes":{"reftype":"symbol","document_id":"StructTypes@1.10.0/ref/StructTypes"},"tag":"reference","children":["StructTypes"],"type":"node"},{"attributes":{},"tag":".","children":["."],"type":"node"},{"attributes":{},"tag":"quote","children":[{"attributes":{"reftype":"symbol","document_id":"StructTypes@1.10.0/ref/StructTypes.fieldprefix"},"tag":"reference","children":["fieldprefix"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"(","children":["("],"type":"node"},{"attributes":{},"tag":"::","children":[{"attributes":{},"tag":"::","children":["::"],"type":"node"},{"attributes":{},"tag":"curly","children":[{"attributes":{},"tag":"Identifier","children":["Type"],"type":"node"},{"attributes":{},"tag":"{","children":["{"],"type":"node"},{"attributes":{},"tag":"Identifier","children":["Person"],"type":"node"},{"attributes":{},"tag":"}","children":["}"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":",","children":[","],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"::","children":[{"attributes":{},"tag":"Identifier","children":["field"],"type":"node"},{"attributes":{},"tag":"::","children":["::"],"type":"node"},{"attributes":{},"tag":"Identifier","children":["Symbol"],"type":"node"}],"type":"node"},{"attributes":{},"tag":")","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"=","children":["="],"type":"node"},{"attributes":{},"tag":"?","children":[{"attributes":{},"tag":"call","children":[{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"Identifier","children":["field"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"==","children":["=="],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"quote","children":[{"attributes":{},"tag":":","children":[":"],"type":"node"},{"attributes":{},"tag":"Identifier","children":["spouse"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"?","children":["?"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"quote","children":[{"attributes":{},"tag":":","children":[":"],"type":"node"},{"attributes":{},"tag":"Identifier","children":["spouse_"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":":","children":[":"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"quote","children":[{"attributes":{},"tag":":","children":[":"],"type":"node"},{"attributes":{},"tag":"Identifier","children":["_"],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"p","children":["Here we have two structs, ",{"attributes":{},"tag":"code","children":["Spouse"],"type":"node"}," and ",{"attributes":{},"tag":"code","children":["Person"],"type":"node"},", and a ",{"attributes":{},"tag":"code","children":["Person"],"type":"node"}," has a ",{"attributes":{},"tag":"code","children":["spouse::Spouse"],"type":"node"},". The database tables to represent these entities might look like:"],"type":"node"},{"attributes":{"lang":"SQL"},"tag":"codeblock","children":["CREATE TABLE spouse (id INT, name VARCHAR);\nCREATE TABLE person (id INT, name VARCHAR, spouse_id INT);\n"],"type":"node"},{"attributes":{},"tag":"p","children":["If we want to leverage a package like Strapping.jl to automatically handle the object construction for us, we could write a get query like the following to ensure a full ",{"attributes":{},"tag":"code","children":["Person"],"type":"node"}," with field ",{"attributes":{},"tag":"code","children":["spouse::Spouse"],"type":"node"}," can be constructed:"],"type":"node"},{"attributes":{"lang":"julia"},"tag":"codeblock","children":[{"attributes":{},"tag":"julia","children":[{"attributes":{},"tag":"=","children":[{"attributes":{},"tag":"call","children":[{"attributes":{},"tag":"Identifier","children":["getPerson"],"type":"node"},{"attributes":{},"tag":"(","children":["("],"type":"node"},{"attributes":{},"tag":"::","children":[{"attributes":{},"tag":"Identifier","children":["id"],"type":"node"},{"attributes":{},"tag":"::","children":["::"],"type":"node"},{"attributes":{},"tag":"Identifier","children":["Int"],"type":"node"}],"type":"node"},{"attributes":{},"tag":")","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"=","children":["="],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"call","children":[{"attributes":{},"tag":".","children":[{"attributes":{},"tag":"Identifier","children":["Strapping"],"type":"node"},{"attributes":{},"tag":".","children":["."],"type":"node"},{"attributes":{},"tag":"quote","children":[{"attributes":{"reftype":"symbol","document_id":"StructTypes@1.10.0/ref/StructTypes.construct"},"tag":"reference","children":["construct"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"(","children":["("],"type":"node"},{"attributes":{},"tag":"Identifier","children":["Person"],"type":"node"},{"attributes":{},"tag":",","children":[","],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"call","children":[{"attributes":{},"tag":".","children":[{"attributes":{},"tag":"Identifier","children":["DBInterface"],"type":"node"},{"attributes":{},"tag":".","children":["."],"type":"node"},{"attributes":{},"tag":"quote","children":[{"attributes":{},"tag":"Identifier","children":["execute"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"(","children":["("],"type":"node"},{"attributes":{},"tag":"Identifier","children":["db"],"type":"node"},{"attributes":{},"tag":",","children":[","],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n    "],"type":"node"},{"attributes":{},"tag":"string","children":[{"attributes":{},"tag":"\"\"\"","children":["\"\"\""],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":["    "],"type":"node"},{"attributes":{},"tag":"String","children":["    SELECT person.id as id, person.name as name, spouse.id as spouse_id, spouse.name as spouse_name\n"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":["    "],"type":"node"},{"attributes":{},"tag":"String","children":["    FROM person\n"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":["    "],"type":"node"},{"attributes":{},"tag":"String","children":["    LEFT JOIN spouse ON person.spouse_id = spouse.id\n"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":["    "],"type":"node"},{"attributes":{},"tag":"String","children":["    WHERE person.id = "],"type":"node"},{"attributes":{},"tag":"$","children":["$"],"type":"node"},{"attributes":{},"tag":"Identifier","children":["id"],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":["    "],"type":"node"},{"attributes":{},"tag":"\"\"\"","children":["\"\"\""],"type":"node"}],"type":"node"},{"attributes":{},"tag":")","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":")","children":[")"],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"p","children":["This works because the column names in the resultset of this query are \"id, name, spouse",{"attributes":{},"tag":"backslash","children":[],"type":"node"},"_id, spouse",{"attributes":{},"tag":"backslash","children":[],"type":"node"},"_name\"; because we defined ",{"attributes":{},"tag":"code","children":["StructTypes.fieldprefix"],"type":"node"}," for ",{"attributes":{},"tag":"code","children":["Person"],"type":"node"},", Strapping.jl knows that each column starting with \"spouse",{"attributes":{},"tag":"backslash","children":[],"type":"node"},"_\" should be used in constructing the ",{"attributes":{},"tag":"code","children":["Spouse"],"type":"node"}," field of ",{"attributes":{},"tag":"code","children":["Person"],"type":"node"},"."],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"}